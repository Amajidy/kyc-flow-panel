<div class="p-6 bg-white shadow-xl rounded-lg">
      <h1 class="font-semibold tracking-tight text-2xl mb-4">گزارش</h1>
      <div class="w-full rounded-lg border border-[#DBDFE6] overflow-hidden">
          <table class="w-full text-[#676F7E]">
            <thead>
                <tr class="border-b border-[#DBDFE6]">
                  <th class="p-4 text-start">شناسه</th>
                  <th class="p-4 text-start">نام</th>
                  <th class="p-4 text-start">نام خوانوادگی</th>
                  <th class="p-4 text-start">تاریخ ایجاد</th>
                  <th class="p-4 text-start">مرحله</th>
                  <th class="p-4 text-start">تاریخ تکمیل</th>
                  <th class="p-4 text-start">شماره تلفن</th>
                  <th class="p-4 text-start">وضعیت</th>
                  <th class="p-4 text-start">عملیات</th>
                </tr>
            </thead>
            <tbody>
              @if (reportsLoading()){
                <tr>
                  <td colspan="100">

                <div class="text-center p-6">
                  <div class="spinner spinner--lg"></div>

                </div>
                  </td>
                </tr>
              } @else {


              @for (item of reports(); track $index){
                <tr class="border-b border-[#DBDFE6] overflow-hidden p-4 last:border-b-0">
                  <td class="p-4 text-black">{{ item.trackingCode }}</td>
                  <td class="p-4">{{ item.firstName }}</td>
                  <td class="p-4">{{ item.lastName }}</td>
                  <td class="p-4">{{ item.createdAt | jalaliDate }}</td>
                  <td class="p-4">
                    <span class="badge">{{ item.currentStep | step }}</span>
                  </td>
                  <td class="p-4">{{ item.completedAt | jalaliDate }}</td>
                  <td class="p-4">{{ item.mobileNumber }}</td>
                  <td class="p-4">
                    <div class="flex items-center gap-2">
                      <div class="h-4 w-4 rounded-full "
                      [ngClass]="item.isCompleted ? 'bg-green-700' : 'bg-red-600'"></div>
                      <span>{{ item.isCompleted ? 'تکمیل شده': 'تکمیل نشده' }}</span>
                    </div>
                  </td>
                  <td>
                    <div>
                      <app-button class="m-4" size="sm" [disabled]="detailLoading()" classes="flex items-center" (click)="openMediaModal(item); selectedIndex.set($index)">
                        @if (detailLoading() && selectedIndex() === $index) {
                          <div class="spinner spinner--sm pt-1"></div>
                        } @else {
                          نمایش
                        }
                      </app-button>
                    </div>
                  </td>
                </tr>

              }
              }
            </tbody>
          </table>
    </div>
</div>
        <app-modal *ngIf="isUserMediaModalShown() && !detailLoading()" [(visible)]="isUserMediaModalShown" title="نمایش فایل">
          <div class="flex flex-col gap-4 items-center">
            @for (item of detail(); track $index){
              @if (item.videoData) {
                <video
                  [src]="item.videoData"
                  controls
                  autoplay
                  width="400">
                </video>
              }
              @if (item.signData){
                <div class="shadow-2xl ">
                  <img [src]="item.signData" alt="sign">
                </div>
              }
            }
          </div>
          <ng-template #modalFooter>
            <div class="flex items-end">
              <app-button (click)="isUserMediaModalShown.set(false)" size="sm">بستن</app-button>
            </div>
          </ng-template>
        </app-modal>
